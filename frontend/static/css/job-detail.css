/**
 * Job Detail Page Layout
 *
 * Responsive 3-column dashboard layout that maximizes screen real estate
 * on large displays while gracefully collapsing to mobile.
 *
 * Breakpoints:
 * - Desktop (â‰¥1280px): 3 columns - Left sidebar (280px) + Main (fluid) + Right sidebar (320px)
 * - Tablet (768px-1279px): 2 columns - Left sidebar (240px) + Combined main content
 * - Mobile (<768px): Single column with reordered sections
 */

/* ============================================================================
   CSS Custom Properties (extending theme variables)
   ============================================================================ */

:root {
  --job-detail-gap: 1.5rem;
  --job-detail-sidebar-left: 280px;
  --job-detail-sidebar-right: 320px;
  --job-detail-max-width: 1600px;
  --job-detail-header-height: 4rem;
  --job-detail-compact-header-height: 3.5rem;
}

/* ============================================================================
   Main Grid Layout
   ============================================================================ */

.job-detail-page {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--job-detail-gap);
  max-width: 100%;
  padding: 1rem;
  padding-top: 0;
  min-height: calc(100vh - 44px); /* Account for CLI panel */
}

/* Desktop: 3-column layout - full width */
@media (min-width: 1280px) {
  .job-detail-page {
    grid-template-columns: var(--job-detail-sidebar-left) 1fr var(--job-detail-sidebar-right);
    max-width: 100%;
    padding: 1.5rem 2rem;
    padding-top: 0;
  }
}

/* Tablet: 2-column layout (left sidebar + combined main) - full width */
@media (min-width: 768px) and (max-width: 1279px) {
  .job-detail-page {
    grid-template-columns: 240px 1fr;
    max-width: 100%;
    padding: 1rem 1.5rem;
    padding-top: 0;
  }
}

/* ============================================================================
   Grid Areas
   ============================================================================ */

/* Header spans full width on all breakpoints */
.job-detail-header {
  grid-column: 1 / -1;
}

/* Footer (danger zone) spans full width */
.job-detail-footer {
  grid-column: 1 / -1;
}

/* Column ordering */
.job-detail-left-sidebar {
  order: 1;
}

.job-detail-main {
  order: 2;
}

.job-detail-right-sidebar {
  order: 3;
}

/* Mobile: Reorder sections for better UX */
@media (max-width: 767px) {
  .job-detail-left-sidebar {
    order: 2;
  }

  .job-detail-main {
    order: 3;
  }

  .job-detail-right-sidebar {
    order: 1; /* Fit score first on mobile */
  }
}

/* Tablet: Hide right sidebar - content is duplicated in main area */
@media (min-width: 768px) and (max-width: 1279px) {
  .job-detail-right-sidebar {
    display: none;
  }

  /* Show tablet-specific combined sections */
  .tablet-combined-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
}

/* Desktop: Show right sidebar, hide tablet-combined sections */
@media (min-width: 1280px) {
  .tablet-combined-section {
    display: none;
  }
}

/* Mobile: Show right sidebar (reordered), hide tablet sections */
@media (max-width: 767px) {
  .tablet-combined-section {
    display: none;
  }
}

/* ============================================================================
   Sticky Sidebars (Desktop & Tablet)
   ============================================================================ */

@media (min-width: 768px) {
  .job-detail-left-sidebar {
    position: sticky;
    top: var(--job-detail-compact-header-height);
    align-self: start;
    max-height: calc(100vh - var(--job-detail-compact-header-height) - 2rem);
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--border-default, #e5e7eb) transparent;
  }

  .job-detail-right-sidebar {
    position: sticky;
    top: var(--job-detail-compact-header-height);
    align-self: start;
    max-height: calc(100vh - var(--job-detail-compact-header-height) - 2rem);
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--border-default, #e5e7eb) transparent;
  }

  /* Custom scrollbar for WebKit browsers */
  .job-detail-left-sidebar::-webkit-scrollbar,
  .job-detail-right-sidebar::-webkit-scrollbar {
    width: 4px;
  }

  .job-detail-left-sidebar::-webkit-scrollbar-track,
  .job-detail-right-sidebar::-webkit-scrollbar-track {
    background: transparent;
  }

  .job-detail-left-sidebar::-webkit-scrollbar-thumb,
  .job-detail-right-sidebar::-webkit-scrollbar-thumb {
    background: var(--border-default, #e5e7eb);
    border-radius: 2px;
  }

  .job-detail-left-sidebar::-webkit-scrollbar-thumb:hover,
  .job-detail-right-sidebar::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary, #9ca3af);
  }
}

/* ============================================================================
   Compact Sticky Header
   ============================================================================ */

.job-detail-header-wrapper {
  grid-column: 1 / -1;
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--bg-page, #f9fafb);
  padding-top: 0.75rem;
  padding-bottom: 0.25rem;
}

/* Full header (visible at top) */
.job-detail-header-full {
  transition: opacity 0.25s ease, max-height 0.25s ease, padding 0.25s ease, margin 0.25s ease;
  max-height: 200px; /* Sufficient for full header content */
}

/* Compact header (visible when scrolled) */
.job-detail-header-compact {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--job-detail-compact-header-height);
  opacity: 0;
  transform: translateY(-100%);
  transition: opacity 0.25s ease, transform 0.25s ease;
  background: var(--bg-card, #ffffff);
  border-bottom: 1px solid var(--border-default, #e5e7eb);
  padding: 0.5rem 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 60;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* When scrolled - hide full header, show compact header */
.job-detail-header-wrapper.scrolled .job-detail-header-full {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  padding: 0;
  margin: 0;
  pointer-events: none;
}

.job-detail-header-wrapper.scrolled .job-detail-header-compact {
  opacity: 1;
  transform: translateY(0);
}

/* Compact header content */
.job-detail-header-compact-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  min-width: 0; /* Allow truncation */
  flex: 1;
}

.job-detail-header-compact-title {
  font-weight: 600;
  color: var(--text-primary, #111827);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 400px;
}

.job-detail-header-compact-company {
  color: var(--text-secondary, #6b7280);
  font-size: 0.875rem;
  white-space: nowrap;
}

.job-detail-header-compact-score {
  background: #eef2ff;
  color: #4f46e5;
  padding: 0.125rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 600;
  white-space: nowrap;
}

/* Adjust main content when compact header is visible */
.job-detail-header-wrapper.scrolled ~ .job-detail-left-sidebar,
.job-detail-header-wrapper.scrolled ~ .job-detail-main,
.job-detail-header-wrapper.scrolled ~ .job-detail-right-sidebar {
  /* Content already accounts for sticky header via top offset */
}

/* ============================================================================
   Active Pipelines Panel
   ============================================================================ */

.job-detail-pipelines-panel {
  grid-column: 1 / -1;
  margin-bottom: 0.5rem;
  position: relative;
  z-index: 40;  /* Below header (50) but above content */
}

/* Make pipelines panel blend with header on desktop */
@media (min-width: 1280px) {
  .job-detail-pipelines-panel {
    margin-top: -0.5rem;
    margin-bottom: 1rem;
  }
}

/* Hide panel completely when no active operations (handled by Alpine x-show) */
.job-detail-pipelines-panel:empty {
  display: none;
}

/* ============================================================================
   Card Component
   ============================================================================ */

.job-detail-card {
  background: var(--bg-card, #ffffff);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.75rem;
  padding: 1rem;
  color: var(--text-primary, #111827);
}

.job-detail-card-highlight {
  border-left: 4px solid var(--color-primary-500, #6366f1);
}

.job-detail-card-title {
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-secondary, #6b7280);
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.job-detail-card-title svg {
  width: 0.875rem;
  height: 0.875rem;
  opacity: 0.7;
}

/* Sidebar card specifics - slightly tighter padding */
.job-detail-left-sidebar .job-detail-card,
.job-detail-right-sidebar .job-detail-card {
  padding: 0.875rem;
}

/* ============================================================================
   Section Spacing
   ============================================================================ */

.job-detail-left-sidebar {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.job-detail-main {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.job-detail-right-sidebar {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* ============================================================================
   Mobile Optimizations
   ============================================================================ */

@media (max-width: 767px) {
  .job-detail-page {
    padding: 0.75rem;
    gap: 1rem;
  }

  .job-detail-card {
    border-radius: 0.5rem;
    padding: 0.75rem;
  }

  /* Sticky pipeline actions on mobile */
  .job-detail-pipeline-actions-sticky {
    position: sticky;
    top: 0;
    z-index: 40;
    background: var(--bg-page, #f9fafb);
    padding: 0.75rem;
    margin: -0.75rem -0.75rem 0.75rem -0.75rem;
    border-bottom: 1px solid var(--border-default, #e5e7eb);
  }

  /* Compact header always visible on mobile */
  .job-detail-header-wrapper {
    position: relative;
    padding-top: 0.5rem;
  }

  .job-detail-header-compact {
    display: none; /* Don't use compact header on mobile */
  }

  .job-detail-header-full {
    /* Always visible on mobile */
  }

  /* Make header more compact on mobile */
  .job-detail-header-full h1 {
    font-size: 1.125rem;
  }

  /* Touch-friendly button sizes */
  .job-detail-left-sidebar button,
  .job-detail-left-sidebar a.btn {
    min-height: 44px;
    min-width: 44px;
  }
}

/* ============================================================================
   Back Link
   ============================================================================ */

.job-detail-back-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--color-primary-600, #4f46e5);
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  transition: color 0.15s ease;
}

.job-detail-back-link:hover {
  color: var(--color-primary-700, #4338ca);
}

.job-detail-back-link svg {
  width: 1rem;
  height: 1rem;
}

/* ============================================================================
   Full Header Styling
   ============================================================================ */

.job-detail-header-full {
  background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
  border-radius: 0.75rem;
  padding: 0.75rem 1.25rem;
  margin-bottom: 0.5rem;
}

.job-detail-header-content {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 1rem;
}

/* Compact layout - single row with centered alignment */
.job-detail-header-compact-layout {
  align-items: center;
}

.job-detail-header-info {
  flex: 1;
  min-width: 0;
}

.job-detail-header-title-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.job-detail-header-title {
  font-size: 1.125rem;
  font-weight: 700;
  color: #ffffff;
  margin: 0;
  display: flex;
  align-items: baseline;
  flex-wrap: wrap;
  gap: 0.375rem;
}

.job-detail-header-title-company {
  font-weight: 500;
  font-size: 0.9375rem;
  color: rgba(255, 255, 255, 0.85);
}

@media (min-width: 768px) {
  .job-detail-header-title {
    font-size: 1.375rem;
  }
  .job-detail-header-title-company {
    font-size: 1.125rem;
  }
}

.job-detail-header-score {
  background: rgba(255, 255, 255, 0.2);
  color: #ffffff;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 600;
}

.job-detail-header-company {
  color: rgba(255, 255, 255, 0.85);
  font-size: 0.9375rem;
  margin-top: 0.25rem;
}

.job-detail-header-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.75rem;
}

.job-detail-header-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
  padding: 0.25rem 0.625rem;
  border-radius: 0.375rem;
  font-size: 0.75rem;
}

.job-detail-header-actions {
  flex-shrink: 0;
}

.job-detail-view-posting-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  background: #ffffff;
  color: #4f46e5;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  font-weight: 600;
  text-decoration: none;
  transition: background-color 0.15s ease, transform 0.1s ease;
  white-space: nowrap;
}

.job-detail-view-posting-btn:hover {
  background: #eef2ff;
  transform: translateY(-1px);
}

.job-detail-view-posting-btn svg {
  width: 1rem;
  height: 1rem;
}

/* ============================================================================
   Sidebar Delete Button - De-emphasized danger zone
   ============================================================================ */

.job-detail-sidebar-delete {
  margin-top: 0.5rem;
  padding-top: 0.75rem;
  border-top: 1px dashed var(--border-default, #e5e7eb);
}

.job-detail-delete-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.5rem;
  font-size: 0.75rem;
  color: var(--text-tertiary, #9ca3af);
  background: transparent;
  border: none;
  border-radius: 0.25rem;
  cursor: pointer;
  transition: color 0.15s ease, background-color 0.15s ease;
}

.job-detail-delete-btn:hover {
  color: #dc2626;
  background-color: rgba(220, 38, 38, 0.08);
}

.job-detail-delete-btn svg {
  opacity: 0.7;
}

.job-detail-delete-btn:hover svg {
  opacity: 1;
}

/* ============================================================================
   Utility Classes
   ============================================================================ */

.job-detail-divider {
  height: 1px;
  background: var(--border-default, #e5e7eb);
  margin: 0.75rem 0;
}

/* Hide on specific breakpoints */
.hide-on-mobile {
  display: none;
}

@media (min-width: 768px) {
  .hide-on-mobile {
    display: block;
  }

  .hide-on-tablet-up {
    display: none;
  }
}

@media (min-width: 1280px) {
  .hide-on-desktop {
    display: none;
  }

  .show-on-desktop {
    display: block;
  }
}

/* ============================================================================
   Dark Mode Overrides for Job Detail Page
   ============================================================================ */

/* Override hardcoded bg-white, bg-gray-50, etc. within job-detail-page */
.dark .job-detail-page .bg-white {
  background-color: var(--bg-card, #1e293b) !important;
}

.dark .job-detail-page .bg-gray-50 {
  background-color: var(--bg-secondary, #1e293b) !important;
}

.dark .job-detail-page .bg-gray-100 {
  background-color: #334155 !important;
}

/* Borders */
.dark .job-detail-page .border-gray-200,
.dark .job-detail-page .border-gray-300 {
  border-color: var(--border-default, #334155) !important;
}

/* Text colors */
.dark .job-detail-page .text-gray-500,
.dark .job-detail-page .text-gray-600 {
  color: var(--text-tertiary, #64748b) !important;
}

.dark .job-detail-page .text-gray-700 {
  color: var(--text-secondary, #94a3b8) !important;
}

.dark .job-detail-page .text-gray-800,
.dark .job-detail-page .text-gray-900 {
  color: var(--text-primary, #f1f5f9) !important;
}

/* Prose content in dark mode */
.dark .job-detail-page .prose {
  color: var(--text-secondary, #94a3b8) !important;
}

.dark .job-detail-page .prose-sm {
  color: var(--text-secondary, #94a3b8) !important;
}

/* Badge/chip colors - preserve readability */
.dark .job-detail-page .bg-purple-100 {
  background-color: rgba(139, 92, 246, 0.2) !important;
}

.dark .job-detail-page .text-purple-800,
.dark .job-detail-page .text-purple-700 {
  color: #a78bfa !important;
}

.dark .job-detail-page .bg-indigo-100,
.dark .job-detail-page .bg-indigo-50 {
  background-color: rgba(99, 102, 241, 0.2) !important;
}

.dark .job-detail-page .text-indigo-800,
.dark .job-detail-page .text-indigo-700 {
  color: #a5b4fc !important;
}

.dark .job-detail-page .bg-blue-100 {
  background-color: rgba(59, 130, 246, 0.2) !important;
}

.dark .job-detail-page .text-blue-700 {
  color: #93c5fd !important;
}

.dark .job-detail-page .bg-green-100 {
  background-color: rgba(16, 185, 129, 0.2) !important;
}

.dark .job-detail-page .text-green-700 {
  color: #6ee7b7 !important;
}

.dark .job-detail-page .bg-yellow-100 {
  background-color: rgba(245, 158, 11, 0.2) !important;
}

.dark .job-detail-page .text-yellow-700 {
  color: #fcd34d !important;
}

.dark .job-detail-page .bg-red-100 {
  background-color: rgba(239, 68, 68, 0.2) !important;
}

.dark .job-detail-page .text-red-700 {
  color: #fca5a5 !important;
}

/* Dropdown menus and popovers */
.dark .job-detail-page [class*="shadow-xl"] {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 8px 10px -6px rgba(0, 0, 0, 0.4) !important;
}

/* Form inputs within cards */
.dark .job-detail-page input,
.dark .job-detail-page select,
.dark .job-detail-page textarea {
  background-color: var(--bg-input, #1e293b);
  color: var(--text-primary, #f1f5f9);
  border-color: var(--border-default, #334155);
}

.dark .job-detail-page input:focus,
.dark .job-detail-page select:focus,
.dark .job-detail-page textarea:focus {
  border-color: var(--border-focus, #60a5fa);
}

/* Iframe loading and error states */
.dark .job-detail-page #iframe-loading {
  background-color: var(--bg-secondary, #1e293b) !important;
}

.dark .job-detail-page #iframe-error {
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: rgba(245, 158, 11, 0.3) !important;
}

/* CV container - keep light background for readability */
.dark .job-detail-page #cv-container {
  background-color: #ffffff !important;
  border-color: var(--border-default, #334155) !important;
}

/* Compact header score badge */
.dark .job-detail-header-compact-score {
  background: rgba(99, 102, 241, 0.2);
  color: #a5b4fc;
}

/* ============================================================================
   Animation & Transitions
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .job-detail-header-wrapper,
  .job-detail-header-full,
  .job-detail-header-compact,
  .job-detail-card {
    transition: none;
  }
}

/* ============================================================================
   TWO-COLUMN Layout (v2 Redesign)
   Converts 3-column to 2-column with actions bar
   ============================================================================ */

/* Desktop: 2-column layout with wider right sidebar */
@media (min-width: 1024px) {
  .job-detail-page.two-column {
    grid-template-columns: 1fr 360px;
  }

  .job-detail-page.two-column .job-detail-left-sidebar {
    display: none;
  }

  .job-detail-page.two-column .job-detail-right-sidebar {
    order: 2;
  }

  .job-detail-page.two-column .job-detail-main {
    order: 1;
  }
}

/* Wide desktop - slightly wider right sidebar */
@media (min-width: 1440px) {
  .job-detail-page.two-column {
    grid-template-columns: 1fr 380px;
  }
}

/* Tablet: Single column for two-column mode */
@media (min-width: 768px) and (max-width: 1023px) {
  .job-detail-page.two-column {
    grid-template-columns: 1fr;
  }

  .job-detail-page.two-column .job-detail-left-sidebar {
    display: none;
  }

  .job-detail-page.two-column .job-detail-right-sidebar {
    order: 2;
  }
}

/* Mobile: Hide left sidebar in two-column mode */
@media (max-width: 767px) {
  .job-detail-page.two-column .job-detail-left-sidebar {
    display: none;
  }
}

/* ============================================================================
   Enhanced Banner with Metadata
   ============================================================================ */

.job-detail-header-enhanced {
  padding: 1rem 1.25rem;
}

.job-detail-header-meta-enhanced {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.meta-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
  padding: 0.25rem 0.625rem;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  white-space: nowrap;
}

.meta-chip svg {
  width: 0.75rem;
  height: 0.75rem;
  opacity: 0.8;
}

.meta-chip.location { background: rgba(59, 130, 246, 0.3); }
.meta-chip.salary { background: rgba(16, 185, 129, 0.3); }
.meta-chip.source { background: rgba(139, 92, 246, 0.2); }
.meta-chip.date { background: rgba(255, 255, 255, 0.1); }

.header-badges {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  flex-wrap: wrap;
}

.status-badge {
  display: inline-flex;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: capitalize;
}

.status-badge.applied { background: rgba(99, 102, 241, 0.3); color: #c7d2fe; }
.status-badge.under-processing { background: rgba(245, 158, 11, 0.3); color: #fcd34d; }
.status-badge.ready { background: rgba(16, 185, 129, 0.3); color: #6ee7b7; }
.status-badge.not-processed { background: rgba(156, 163, 175, 0.3); color: #d1d5db; }
.status-badge.rejected { background: rgba(239, 68, 68, 0.3); color: #fca5a5; }
.status-badge.interview { background: rgba(59, 130, 246, 0.3); color: #93c5fd; }

.fit-score-pill {
  background: rgba(255, 255, 255, 0.25);
  color: #ffffff;
  font-weight: 700;
  padding: 0.25rem 0.625rem;
  border-radius: 9999px;
  font-size: 0.75rem;
}

/* Quick Action Icons in Header */
.job-detail-header-quick-actions {
  display: flex;
  gap: 0.375rem;
  margin-top: 0.625rem;
}

.quick-action-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.75rem;
  height: 1.75rem;
  border-radius: 0.375rem;
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
  border: none;
  cursor: pointer;
  transition: background 0.15s ease;
}

.quick-action-icon:hover {
  background: rgba(255, 255, 255, 0.25);
}

.quick-action-icon svg {
  width: 0.875rem;
  height: 0.875rem;
}

/* IDs Tooltip */
.meta-ids-group {
  position: relative;
}

.ids-tooltip {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 0.5rem;
  padding: 0.75rem;
  background: var(--bg-card, #ffffff);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  font-size: 0.75rem;
  color: var(--text-primary, #111827);
  white-space: nowrap;
  z-index: 100;
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.ids-tooltip .label {
  font-weight: 600;
  color: var(--text-secondary, #6b7280);
  margin-right: 0.25rem;
}

.ids-tooltip a {
  color: var(--color-primary-600, #4f46e5);
}

/* Dark mode tooltip */
.dark .ids-tooltip {
  background: var(--bg-card, #1e293b);
  border-color: var(--border-default, #334155);
  color: var(--text-primary, #f1f5f9);
}

/* ============================================================================
   Streamlined Actions Bar
   ============================================================================ */

.job-detail-actions-bar {
  grid-column: 1 / -1;
  background: var(--bg-card, #ffffff);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.75rem;
  padding: 0.875rem 1rem;
  margin-bottom: 0.5rem;
}

.actions-bar-primary {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.action-primary {
  flex: 0 0 auto;
}

/* Hero button - All Ops */
.btn-action-hero {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  font-size: 0.875rem;
  font-weight: 600;
  color: #ffffff;
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: transform 0.1s ease, box-shadow 0.15s ease;
  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
}

.btn-action-hero:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
}

.btn-action-hero:active:not(:disabled) {
  transform: translateY(0);
}

.btn-action-hero:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-action-hero svg {
  width: 1.125rem;
  height: 1.125rem;
}

/* Prominent button - Generate CV */
.btn-action-prominent {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.625rem 1rem;
  font-size: 0.875rem;
  font-weight: 600;
  color: #ffffff;
  background: #10b981;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: background 0.15s ease;
}

.btn-action-prominent:hover:not(:disabled) {
  background: #059669;
}

.btn-action-prominent:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ============================================================================
   Hero Button Split Group (All Ops + Tier Dropdown)
   ============================================================================ */

.hero-button-wrapper,
.prominent-button-wrapper {
  position: relative;
}

.btn-action-hero-group,
.btn-action-prominent-group {
  display: inline-flex;
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.btn-action-hero-group:focus-within,
.btn-action-prominent-group:focus-within {
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3);
}

/* Hero button main part (no right border radius) */
.btn-action-hero-group .btn-action-hero {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* Hero button dropdown trigger */
.btn-action-hero-dropdown {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0 0.625rem;
  background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%);
  border: none;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  border-top-right-radius: 0.5rem;
  border-bottom-right-radius: 0.5rem;
  cursor: pointer;
  transition: background 0.15s ease;
}

.btn-action-hero-dropdown:hover:not(:disabled) {
  background: linear-gradient(135deg, #6d28d9 0%, #4338ca 100%);
}

.btn-action-hero-dropdown:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-action-hero-dropdown .tier-badge {
  font-size: 0.875rem;
}

.btn-action-hero-dropdown .dropdown-chevron {
  color: rgba(255, 255, 255, 0.8);
  transition: transform 0.15s ease;
}

/* Prominent button main part (no right border radius) */
.btn-action-prominent-group .btn-action-prominent {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* Prominent button dropdown trigger */
.btn-action-prominent-dropdown {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0 0.5rem;
  background: #10b981;
  border: none;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  border-top-right-radius: 0.5rem;
  border-bottom-right-radius: 0.5rem;
  cursor: pointer;
  transition: background 0.15s ease;
}

.btn-action-prominent-dropdown:hover:not(:disabled) {
  background: #059669;
}

.btn-action-prominent-dropdown:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-action-prominent-dropdown .tier-badge {
  font-size: 0.8125rem;
}

.btn-action-prominent-dropdown .dropdown-chevron {
  color: rgba(255, 255, 255, 0.8);
  transition: transform 0.15s ease;
}

/* Tier dropdown menu - hero variant */
.tier-dropdown-hero,
.tier-dropdown-prominent {
  position: absolute;
  left: 0;
  top: calc(100% + 0.375rem);
  min-width: 260px;
  background: var(--bg-card, #ffffff);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  z-index: 50;
}

.tier-dropdown-header {
  padding: 0.5rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.025em;
  border-bottom: 1px solid var(--border-default, #e5e7eb);
  background: var(--bg-secondary, #f9fafb);
  border-top-left-radius: 0.5rem;
  border-top-right-radius: 0.5rem;
}

.tier-option {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  width: 100%;
  padding: 0.625rem 0.75rem;
  font-size: 0.875rem;
  text-align: left;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background 0.1s ease;
}

.tier-option:hover {
  background: var(--bg-secondary, #f3f4f6);
}

.tier-option.selected {
  background: var(--color-primary-50, #eef2ff);
}

.tier-option:last-child {
  border-bottom-left-radius: 0.5rem;
  border-bottom-right-radius: 0.5rem;
}

.tier-option-icon {
  font-size: 1rem;
  flex-shrink: 0;
}

.tier-option-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
}

.tier-option-label {
  font-weight: 600;
  color: var(--text-primary, #111827);
}

.tier-option-model {
  font-size: 0.75rem;
  color: var(--text-secondary, #6b7280);
}

.tier-option-cost {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-tertiary, #9ca3af);
  flex-shrink: 0;
}

.tier-option-check {
  color: var(--color-primary-600, #4f46e5);
  flex-shrink: 0;
}

/* Chevron rotation */
.dropdown-chevron.rotate-180 {
  transform: rotate(180deg);
}

/* Loading state */
.btn-action-hero-group.btn-action-loading .btn-action-hero,
.btn-action-hero-group.btn-action-loading .btn-action-hero-dropdown,
.btn-action-prominent-group.btn-action-loading .btn-action-prominent,
.btn-action-prominent-group.btn-action-loading .btn-action-prominent-dropdown {
  cursor: not-allowed;
  opacity: 0.85;
}

/* Dark mode support */
.dark .tier-dropdown-hero,
.dark .tier-dropdown-prominent {
  background: var(--bg-card, #1f2937);
  border-color: var(--border-default, #374151);
}

.dark .tier-dropdown-header {
  background: var(--bg-secondary, #111827);
  border-color: var(--border-default, #374151);
  color: var(--text-secondary, #9ca3af);
}

.dark .tier-option:hover {
  background: var(--bg-secondary, #374151);
}

.dark .tier-option.selected {
  background: rgba(99, 102, 241, 0.15);
}

.dark .tier-option-label {
  color: var(--text-primary, #f9fafb);
}

/* Advanced toggle button */
.btn-advanced-toggle {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  margin-left: auto;
  padding: 0.5rem 0.75rem;
  font-size: 0.8125rem;
  color: var(--text-secondary, #6b7280);
  background: var(--bg-secondary, #f3f4f6);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.375rem;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-advanced-toggle:hover,
.btn-advanced-toggle.active {
  color: var(--text-primary, #111827);
  background: var(--bg-card, #ffffff);
  border-color: var(--color-primary-400, #818cf8);
}

.btn-advanced-toggle svg {
  width: 0.875rem;
  height: 0.875rem;
  transition: transform 0.2s ease;
}

.btn-advanced-toggle.active svg {
  transform: rotate(180deg);
}

/* Advanced actions panel */
.actions-bar-advanced {
  margin-top: 0.875rem;
  padding-top: 0.875rem;
  border-top: 1px solid var(--border-default, #e5e7eb);
}

.advanced-actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

/* Compact action buttons */
.btn-action-compact {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.5rem 0.625rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--text-primary, #111827);
  background: var(--bg-secondary, #f3f4f6);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.375rem;
  cursor: pointer;
  transition: all 0.15s ease;
  flex: 1;
}

.btn-action-compact:hover:not(:disabled) {
  background: var(--bg-card, #ffffff);
  border-color: var(--color-primary-400, #818cf8);
  color: var(--color-primary-600, #4f46e5);
}

.btn-action-compact:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-action-dropdown-compact {
  padding: 0.5rem 0.375rem;
  font-size: 0.75rem;
  background: var(--bg-secondary, #f3f4f6);
  border: 1px solid var(--border-default, #e5e7eb);
  border-left: none;
  border-radius: 0 0.375rem 0.375rem 0;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-action-dropdown-compact:hover {
  background: var(--bg-card, #ffffff);
}

.tier-badge-compact {
  font-size: 0.625rem;
  padding: 0.0625rem 0.25rem;
  border-radius: 0.25rem;
  background: rgba(99, 102, 241, 0.15);
  color: var(--color-primary-600, #4f46e5);
}

/* Tier dropdown compact variant */
.tier-dropdown-compact {
  min-width: 12rem;
}

/* Quick actions row */
.quick-actions-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding-top: 0.75rem;
  border-top: 1px dashed var(--border-default, #e5e7eb);
  margin-top: 0.5rem;
}

.btn-quick-action {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.375rem 0.625rem;
  font-size: 0.75rem;
  color: var(--text-secondary, #6b7280);
  background: transparent;
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.375rem;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-quick-action:hover {
  color: var(--color-primary-600, #4f46e5);
  border-color: var(--color-primary-300, #a5b4fc);
  background: var(--color-primary-50, #eef2ff);
}

.btn-quick-action svg {
  width: 0.875rem;
  height: 0.875rem;
}

/* Status row */
.status-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding-top: 0.75rem;
  border-top: 1px dashed var(--border-default, #e5e7eb);
  margin-top: 0.5rem;
  flex-wrap: wrap;
}

.status-field {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.status-field label {
  font-size: 0.6875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.025em;
  color: var(--text-tertiary, #9ca3af);
}

.form-select-inline {
  padding: 0.375rem 0.5rem;
  font-size: 0.75rem;
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.25rem;
  background: var(--bg-card, #ffffff);
  color: var(--text-primary, #111827);
  cursor: pointer;
}

.form-select-inline:focus {
  outline: none;
  border-color: var(--color-primary-400, #818cf8);
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

.btn-batch-toggle {
  margin-left: auto;
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-secondary, #6b7280);
  background: var(--bg-secondary, #f3f4f6);
  border: 1px solid var(--border-default, #e5e7eb);
  border-radius: 0.375rem;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-batch-toggle:hover {
  background: var(--bg-card, #ffffff);
}

.btn-batch-toggle.active {
  color: #b45309;
  background: #fef3c7;
  border-color: #f59e0b;
}

/* Dark mode for actions bar */
.dark .job-detail-actions-bar {
  background: var(--bg-card, #1e293b);
  border-color: var(--border-default, #334155);
}

.dark .btn-advanced-toggle {
  background: var(--bg-secondary, #334155);
  color: var(--text-secondary, #94a3b8);
  border-color: var(--border-default, #475569);
}

.dark .btn-advanced-toggle:hover,
.dark .btn-advanced-toggle.active {
  background: var(--bg-card, #1e293b);
  color: var(--text-primary, #f1f5f9);
}

.dark .btn-action-compact {
  background: var(--bg-secondary, #334155);
  color: var(--text-primary, #f1f5f9);
  border-color: var(--border-default, #475569);
}

.dark .btn-action-compact:hover:not(:disabled) {
  background: var(--bg-card, #1e293b);
  border-color: var(--color-primary-400, #818cf8);
}

.dark .btn-quick-action {
  color: var(--text-secondary, #94a3b8);
  border-color: var(--border-default, #475569);
}

.dark .btn-quick-action:hover {
  background: rgba(99, 102, 241, 0.15);
  border-color: var(--color-primary-400, #818cf8);
}

.dark .form-select-inline {
  background: var(--bg-secondary, #334155);
  color: var(--text-primary, #f1f5f9);
  border-color: var(--border-default, #475569);
}

.dark .btn-batch-toggle {
  background: var(--bg-secondary, #334155);
  color: var(--text-secondary, #94a3b8);
  border-color: var(--border-default, #475569);
}

/* Mobile responsive for actions bar */
@media (max-width: 767px) {
  .job-detail-actions-bar {
    padding: 0.75rem;
    border-radius: 0.5rem;
  }

  .actions-bar-primary {
    gap: 0.5rem;
  }

  .btn-action-hero {
    padding: 0.5rem 1rem;
    font-size: 0.8125rem;
    flex: 1;
    justify-content: center;
  }

  .btn-action-prominent {
    padding: 0.5rem 0.75rem;
    font-size: 0.8125rem;
    flex: 1;
    justify-content: center;
  }

  .btn-advanced-toggle {
    width: 100%;
    margin-left: 0;
    margin-top: 0.5rem;
    justify-content: center;
  }

  .advanced-actions-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .status-row {
    flex-direction: column;
    align-items: stretch;
    gap: 0.5rem;
  }

  .btn-batch-toggle {
    margin-left: 0;
  }
}

/* ============================================================================
   Right Sidebar Reorganization Styles
   ============================================================================ */

/* Collapsible card styles */
.job-detail-card-collapsible .job-detail-card-title {
  cursor: pointer;
  user-select: none;
  margin-bottom: 0;
  padding: 0.25rem 0;
  transition: color 0.15s ease;
}

.job-detail-card-collapsible .job-detail-card-title:hover {
  color: var(--color-primary-600, #4f46e5);
}

.job-detail-card-collapsible .job-detail-card-title svg.collapse-icon {
  margin-left: auto;
  transition: transform 0.2s ease;
}

.job-detail-card-collapsible .job-detail-card-title svg.collapse-icon.rotated {
  transform: rotate(180deg);
}

.job-detail-card-collapsible-content {
  padding-top: 0.75rem;
}

/* Application Tracking in sidebar */
.application-tracking-compact {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.application-tracking-compact .tracking-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8125rem;
}

.application-tracking-compact .tracking-label {
  color: var(--text-secondary, #6b7280);
  min-width: 5rem;
}

.application-tracking-compact .tracking-value {
  color: var(--text-primary, #111827);
  font-weight: 500;
}
